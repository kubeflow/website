<script>
  // avoid polluting global namespace
  (function() {
    // Append anchor links to headings in markdown.
    var article = document.getElementsByTagName('main')[0];
    var headings = article.querySelectorAll('h1, h2, h3, h4, h5, h6');
    headings.forEach(function(heading) {
      if (heading.id) {
        var a = document.createElement('a');
        // set visibility: hidden, not display: none to avoid layout change
        a.style.visibility = 'hidden';
        // [a11y] hide this from screen readers, etc..
        a.setAttribute('aria-hidden', 'true');
        a.innerHTML = ' #'
        a.href = '#'+heading.id;
        heading.insertAdjacentElement('beforeend', a);
        heading.addEventListener('mouseenter', function() {
          a.style.visibility = 'initial';
        });
        heading.addEventListener('mouseleave', function() {
          a.style.visibility = 'hidden';
        });
      }
    });
  })();
</script>
